# è‡ªå·±åŠ¨æ‰‹ç¼–è¯‘OpenJDK1.8

## å‰è¨€

ç›¸ä¿¡çœ‹è¿‡ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹çš„å°ä¼™ä¼´éƒ½å°è¯•è¿‡è‡ªå·±åŠ¨æ‰‹ç¼–è¯‘OpenJDKï¼Œæœ‰æ²¡æœ‰æˆåŠŸå‘¢ï¼Ÿè¯„è®ºå‘Šè¯‰æˆ‘ã€‚çºµè§‚ç½‘ä¸Šé‚£ä¹ˆå¤šæ•™ç¨‹ï¼Œä¸å®¢æ°”çš„è¯´ï¼Œè¦ä¹ˆè®²çš„å¤ªç®€å•è¦ä¹ˆä¸èƒ½ç”¨ï¼Œä»Šå¤©ï¼Œåœ¨è¸©äº†æ— æ•°å‘ä¹‹åæˆåŠŸç¼–è¯‘å®Œæˆçš„æˆ‘ï¼Œä¸ºäº†ä¸è®©åæ¥è€…ç»§ç»­è¸©å‘ï¼Œæ‰€ä»¥å†³å®šå†™è¿™ç¯‡åšæ–‡ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œäº®å›¾ï¼š

![æˆæœå›¾](https://github.com/ChengYongchao/OpenJdk8/tree/master/img/æˆæœå›¾.png)

## æƒ³æƒ³è‡ªå·±åˆ°åº•åœ¨å“ªä¸ªå‘ğŸ™ˆ

æˆ‘æŠŠç¼–è¯‘JDKçš„å‘åˆ†ä¸ºè¿™å‡ ä¸ªé˜¶æ®µ

- å®‰è£…linuxï¼Œé…ç½®ç¯å¢ƒå·¥å…·å¦‚yumã€ssh
- ä¸‹è½½OpenJDKï¼Œè·å–å®Œæ•´OpenJDKèµ„æºï¼ˆè§£å‹å500Må·¦å³ï¼‰
- å‡†å¤‡ç¼–è¯‘æ‰€éœ€å·¥å…·
- ç¼–è¯‘ä¸­é‡åˆ°çš„é—®é¢˜

å°ä¼™ä¼´ä»¬å¯ä»¥å¯¹å·å…¥åº§ï¼Œæ˜¯ç¬¬ä¸€æ­¥é€‰é”™linuxå°±ç»äº†å‰è·¯å‘¢ï¼Œè¿˜æ˜¯ä¸‹è½½OpenJDKæ‰§è¡Œbash ./configure å°±æ˜¯æ‰§è¡Œä¸äº†å‘¢ï¼ˆOpenJDkä¸å®Œæ•´ï¼‰ï¼Ÿè¿˜æ˜¯æ€»æ˜¯æç¤ºæ²¡æœ‰ç¼–è¯‘å·¥å…·æŠ¥é”™å‘¢ï¼Ÿæˆ–è€…æœ€åå€’åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å‘¢ï¼Ÿ

æ€»ä¹‹ï¼Œè‡ªå·±ç¼–è¯‘JDKçš„é“è·¯å¾ˆæ˜¯å´å²–ï¼Œå“¥ä»¬å„¿æŠŠèµ°å¾—é€šçš„è·¯ä»Šå¤©ç»™å¤§å®¶è®²ä¸ªæ˜æ˜ç™½ç™½ã€‚

# åŸºç¡€

### 1.linux ç¯å¢ƒ

ç›®å‰ä¸»æµæ˜¯åœ¨linuxä¸‹ç¼–è¯‘ï¼Œè¿™é‡Œä½¿ç”¨CentOS-7-x86_64-Everything-2003.isoç‰ˆæœ¬ï¼Œé“¾æ¥:[Centos7ä¸‹è½½](http://mirrors.aliyun.com/centos/7/isos/x86_64/CentOS-7-x86_64-Everything-2003.torrent)

ä¸è¦ä½¿ç”¨å…¶ä»–ä»»ä½•ç‰ˆæœ¬çš„linux åŒ…æ‹¬CentOS8ï¼Œéƒ½æ˜¯è¡€çš„æ•™è®­ï¼Œæ ç²¾å¯ä»¥è¯•è¯•ï¼Œä¸‹æ–‡åŒç†ã€‚

### 2.OpenJDK8æºç ä¸‹è½½

ç½‘ç«™éšä¾¿æ‰¾ç¯‡åšæ–‡ï¼Œéƒ½ä¼šå‘Šè¯‰ä½ å»å®˜ç½‘ä¸‹è½½ï¼š http://jdk.java.net/java-se-ri/8 ï¼Œbutè¿™ä¸ªåœ°å€å·²ç»æ²¡äº†ï¼Œç°åœ¨Oracleå·²ç»ä¸æä¾›å®Œå…¨ç‰ˆæºç çš„å‹ç¼©åŒ…äº†ï¼Œå¯ä»¥ç”¨çš„åœ°å€åœ¨http://hg.openjdk.java.net/ï¼Œåˆ°äº†è¿™ä¸ªç½‘ç«™åˆæ˜¯æŠ“çï¼Œæ€ä¹ˆç”¨å‘¢ï¼Ÿä»¥jdk8ä¸ºä¾‹ï¼š

â€‹		ç‚¹å‡»jdk8->å†ç‚¹å‡»ä¸‹ä¸ªé¡µé¢çš„jdk8->å†ç‚¹å‡»å·¦è¾¹çš„browse->å†ç‚¹å‡»å·¦è¾¹çš„zip

è¿™æ ·ä¸‹è½½ä¸‹æ¥çš„å°±æ˜¯ä¸€éƒ¨åˆ†äº†ï¼Œä¸‹è½½ä¸‹æ¥çš„æ–‡ä»¶å¤¹æ”¾åˆ°linuxä¸‹æ‰§è¡Œget_source.shè·å–å…¨éƒ¨èµ„æºã€‚è¿™é‡Œæœ‰ä¸ªå‘ï¼Œå®¶é‡Œæ²¡æœ‰æ¢¯å­çš„æœ‹å‹ï¼Œå°±ç®—èƒ½æ‰§è¡Œget_source.shä¹Ÿå¾—ä¸‹ä¸ªåå‡ ä¸ªå°æ—¶ã€‚ğŸ™ƒ

æƒ³è¦å®Œæ•´ç‰ˆOpenJDK8çš„å¯ä»¥åœ¨ï¼š

- æˆ‘çš„githubä»“åº“ä¸‹è½½ï¼Œ[ä¸‹è½½åœ°å€](https://github.com/ChengYongchao/OpenJdk8)
- ç™¾åº¦äº‘ï¼šhttps://pan.baidu.com/s/1dEyJr74kEO7Yyv_X-Jxiyw æå–ç ï¼š0011

è¿™ä¸ªç‰ˆæœ¬æ˜¯èƒ½ç›´æ¥æ‰§è¡Œconfigureçš„,ä¸éœ€è¦æ‰§è¡Œget_source.shã€‚è¿™é‡Œè¦æ˜¯å¬ä¸æ‡‚configureæ²¡å…³ç³»ï¼Œæ¥ç€å¾€ä¸‹çœ‹ã€‚

### 3.JDK7

ç¼–è¯‘JDK8éœ€è¦ä¸€ä¸ªä½ä¸€ç‰ˆæœ¬çš„JDKä½œä¸ºboot-jdkï¼Œæ‰€ä»¥éœ€è¦å‡†å¤‡ä¸€ä¸ª [jdk-7-linux-x64.tar.gz](http://download.oracle.com/otn-pub/java/jdk/7/jdk-7-linux-x64.tar.gz) ï¼Œ[ä¸‹è½½åœ°å€](https://www.oracle.com/cn/database/technology/java-se-jdk-7-download.html)

# å¼€å§‹

### 1. å®‰è£…CentOS7

- å†…å­˜è°ƒæ•´å¤§ä¸€äº›ï¼Œæ¨è8Gï¼Œå¤„ç†å™¨8æ ¸
- æœ‰éœ€è¦è¿œç¨‹è¿æ¥çš„ï¼Œ[å‚è€ƒ](https://www.cnblogs.com/mzhaox/p/11304793.html)
- å®‰è£…wget: yum install wget
- ä¿®æ”¹yumæºä¸ºé˜¿é‡Œæºï¼š
	
	- cd  /etc/yum.repos.d/ 
	-  wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo 
	-  yum makecache 
- å®‰è£…è§£å‹å·¥å…·

![image-20200909094625137](\img\è§£å‹.png)

![image-20200909094625137](\img\è§£å‹2.png)

å½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥æ‰§è¡Œ yum install zip unzip

### 2.ä¸Šä¼ JDK7

- æ ¹ç›®å½•åˆ›å»ºæ–‡ä»¶å¤¹java
- ä¸Šä¼ JDK7åˆ°javaæ–‡ä»¶å¤¹ä¸‹
- è§£å‹ï¼štar zxvf jdk-7u80-linux-x64.tar.gz

![è§£å‹jdk7](\img\è§£å‹jdk7.png)

- æ³¨æ„ï¼Œä¸éœ€è¦æ›´æ”¹ç¯å¢ƒå˜é‡ï¼Œåªéœ€è¦è®°ä½è¿™ä¸ªåœ°å€å°±è¡Œäº†ï¼š/java/jdk1.7.0_80/

### 3.å¤„ç†æºç åŒ…

- åˆ‡æ¢åˆ°rootç”¨æˆ·:su root
- æ ¹ç›®å½•ä¸‹åˆ›å»ºjavaTestæ–‡ä»¶å¤¹:mkdir javaTest
- ä¸Šä¼ æºç åŒ…åˆ°javaTestæ–‡ä»¶å¤¹ä¸‹
- è§£å‹ï¼šunzip YourOpenJDK.zip -d /javaTest/

![è§£å‹OpenJDK](\img\è§£å‹OpenJDK.png)

- è¿›å…¥è§£å‹åçš„æ–‡ä»¶å¤¹ä¸­ï¼š cd YourOpenJDK

![1599576226566](\img\javaTest.png)



åˆ°æ­¤ä¸ºæ­¢ï¼Œå‰æœŸå‡†å¤‡å·¥ä½œéƒ½å·²åšå®Œï¼Œä¸‹é¢åªéœ€è¦ä¸æ–­æ‰§è¡Œ bash ./configure +å‚æ•° è¿›è¡Œè¯•é”™ æ’é™¤è‡ªå·±å°‘äº†å“ªäº›å·¥å…·å°±è¡Œäº†ã€‚

### 4.æ‰§è¡Œbash ./configure +å‚æ•°

```java
#å‘½ä»¤
bash ./configure --with-target-bits=64 --with-boot-jdk=/java/jdk1.7.0_80/ --with-debug-level=slowdebug
#å‚æ•°è¯¦è§£
--with-boot-jdk å°±æ˜¯å‰é¢è¯´çš„bootjdk åœ°å€æ”¹ä¸ºè‡ªå·±è§£å‹jdkåçš„æ–‡ä»¶å¤¹ä½ç½®
--with-debug-level debugçº§åˆ«ï¼Œè¿™é‡Œå†™slowdebugæ–¹ä¾¿æ’æŸ¥é—®é¢˜
```

åˆ°è¿™é‡Œï¼Œåªéœ€è¦åˆ‡æ¢åˆ°YourOpenJDKè¿™ä¸ªç›®å½•ä¸‹ï¼Œä¸æ–­æ‰§è¡Œbash ./configure --with-target-bits=64 --with-boot-jdk=/java/jdk1.7.0_80/ --with-debug-level=slowdebugå°±è¡Œäº†

![](img/configure1.png)

æ‰§è¡Œä¸€æ¬¡åçœ‹ä¸‹æŠ¥é”™æç¤ºï¼Œæ ¹æ®æç¤ºè¯•ç”¨yumå®‰è£…å¯¹åº”å·¥å…·ç›´åˆ°æ‰€æœ‰æŠ¥é”™è§£å†³ã€‚ä¸¾ä¾‹ï¼š

![cc](img/cc.png)



ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶æç¤ºç¼ºå°‘å¼€å‘å·¥å…·ï¼ŒæŒ‰ç…§æç¤ºæ‰§è¡Œï¼š

```java
sudo yum groupinstall "Development Tools"
```

![cc2](img/cc2.png)

å®‰è£…å®Œæ¯•åå†æ¬¡æ‰§è¡Œbash ./configure --with-target-bits=64 --with-boot-jdk=/java/jdk1.7.0_80/ --with-debug-level=slowdebug ä¸‹æ–‡åŒç†ï¼Œè¿™é‡ŒæŠŠé‡åˆ°çš„ä¸€ä¸€åˆ—ä¸¾ï¼š

![cc3](img/cc3.png)

![cc4](img/cc4.png)

![cc5](img/cc5.png)

![cc6](img/cc6.png)

ä¸Šè¿°ä¸€å…±éœ€è¦å®‰è£…å…­ä¸ªå·¥å…·ï¼Œä¸€ç›´åˆ°é‡åˆ°ä¸‹å›¾ï¼Œè¯æ˜æ‰€æœ‰å·¥å…·éƒ½å‡†å¤‡å®Œæˆï¼š

![cc7](img/cc7.png)

### 5.æ‰§è¡Œmake all

æ‰§è¡Œ

```java
make all
```

![m1](img/m1.png)

![m2](img/m2.png)

ä¸‹é¢å°±æ˜¯é™é™çš„ç­‰å¾…ï¼Œä¸ä¼šå†é‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼ˆæŒ‰ç…§ä¸Šæ–‡åšï¼Œæ²¡æœ‰çš„è¯ä¸ä¿è¯ï¼‰ï¼Œæ ¹æ®æœºå™¨çš„é…ç½®è€—æ—¶ä»5minåˆ°30minä¸ç­‰ï¼Œä¸­é—´ä¼šæœ‰ä¸€äº› WARNINGè­¦å‘Š å’Œä¸‹å›¾çš„ERRORï¼Œéƒ½ä¸ç”¨ç®¡.

![m3](img/m3.png)

ä¸€ç›´åˆ°ç»“æŸï¼Œæ˜¾ç¤ºå¦‚ä¸‹å›¾ï¼š

![r1](img/r1.png)

Congratulations~,è¸è¿‡æ‰€æœ‰çš„å‘ï¼Œç»ˆäºç¼–è¯‘æˆåŠŸäº†ã€‚ä¸‹é¢å¯ä»¥æ‰§è¡Œå‘½ä»¤æŸ¥çœ‹javaversionï¼š

```java
cd build/linux-x86_64-normal-server-slowdebug/images/j2sdk-image/bin/

./java -version
```

![r2](img/r2.png)

# ç»“å°¾

åˆ°è¿™é‡Œï¼Œæ•´ä¸ªç¼–è¯‘OpenJDK8çš„æ‰€æœ‰æ­¥éª¤éƒ½å®Œæˆäº†ï¼Œæœ‰å“¥ä»¬å„¿å°±è¯´äº†ï¼Œæ„Ÿè§‰å¾ˆç®€å•ï¼Œå»ºè®®æ²¡åƒè¿‡äºçš„æ¢ä¸ªlinuxæ¢ä¸ªOpenJDKè‡ªå·±æ¥ä¸€éğŸ™ƒ

ä¸ºäº†è¿™å‡ å¤©æ‰çš„å¤´å‘ï¼Œè§‰å¾—å†™çš„æœ‰ç”¨çš„å“¥ä»¬å„¿ç‚¹ä¸ªèµï¼Œæœ‰é—®é¢˜è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼Œä½ ä»¬çš„äº’åŠ¨æ˜¯å¼Ÿå¼Ÿæœ€å¤§çš„åŠ¨åŠ›ã€‚

ä¸‹ç¯‡ç ”ç©¶è‡ªå·±ç¼–è¯‘çš„JDKå¯ä»¥ç”¨æ¥åšä»€ä¹ˆï¼Œå¥¥é‡Œç»™~ğŸ’ª